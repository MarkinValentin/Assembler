class VendingMachine:
    def __init__(self):
        self.state = 'idle'
        self.balance = 0

    def insert_coin(self, coin):
        if self.state == 'idle':
            if coin in [1, 2, 5, 10]:
                self.balance += coin
                print("Inserted {} ruble coin. Current balance: {} rubles.".format(coin, self.balance))
            else:
                print("Invalid coin. Accepted coins: 1, 2, 5, 10.")
        else:
            print("Cannot insert coin. Vending machine is currently processing a transaction.")

    def select_product(self, product_price):
        if self.state == 'idle':
            if self.balance >= product_price:
                self.balance -= product_price
                print("Product purchased! Your change: {} rubles.".format(self.balance))
                self.balance = 0
            else:
                print("Insufficient balance. Please insert more coins.")
        else:
            print("Cannot select product. Vending machine is currently processing a transaction.")

    def reset(self):
        self.state = 'idle'
        self.balance = 0
        print("Vending machine reset.")


# Пример использования:

vending_machine = VendingMachine()

vending_machine.insert_coin(5)
vending_machine.select_product(3)

vending_machine.insert_coin(2)
vending_machine.insert_coin(2)
vending_machine.select_product(9)

vending_machine.insert_coin(10)
vending_machine.select_product(9)

vending_machine.reset()
