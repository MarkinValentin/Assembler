#include <stdio.h>

// Состояния автомата Мура
typedef enum {
    STATE_IDLE,
    STATE_SELECT_ITEM,
    STATE_DISPENSE,
    STATE_RETURN_CHANGE
} State;

// Функция, которая обрабатывает входные монеты и возвращает следующее состояние
State process_input(State current_state, int coin) {
    switch (current_state) {
        case STATE_IDLE:
            if (coin == 1 || coin == 2)
                return STATE_SELECT_ITEM;
            break;
        case STATE_SELECT_ITEM:
            if (coin == 1 || coin == 2)
                return STATE_SELECT_ITEM;
            else if (coin >= 5)
                return STATE_DISPENSE;
            break;
        case STATE_DISPENSE:
            return STATE_RETURN_CHANGE;
        case STATE_RETURN_CHANGE:
            return STATE_IDLE;
    }
    return current_state;
}

// Функция, которая выполняет действие в зависимости от текущего состояния
void perform_action(State current_state) {
    switch (current_state) {
        case STATE_IDLE:
            printf("Выберите товар (1 или 2)\n");
            break;
        case STATE_SELECT_ITEM:
            printf("Внесите дополнительные монеты или нажмите кнопку выбора товара\n");
            break;
        case STATE_DISPENSE:
            printf("Товар выдается\n");
            break;
        case STATE_RETURN_CHANGE:
            printf("Сдача возвращается\n");
            break;
    }
}

int main() {
    State current_state = STATE_IDLE;
    int coin;

    while (1) {
        perform_action(current_state);
        printf("Вставьте монету (1, 2, 5 или 10): ");
        scanf("%d", &coin);

        current_state = process_input(current_state, coin);
    }

    return 0;
}
