#include "ns3/core-module.h"
#include "ns3/network-module.h"
#include "ns3/lte-module.h"

using namespace ns3;

int main (int argc, char *argv[])
{
    // Создание узлов eNB и двух абонентов
    NodeContainer enbNodes;
    enbNodes.Create(1);

    NodeContainer ueNodes;
    ueNodes.Create(2);

    // Настройка LTE сети
    LteHelper lteHelper;
    NetDeviceContainer enbDevs, ueDevs;
    enbDevs = lteHelper.InstallEnbDevice(enbNodes);
    ueDevs = lteHelper.InstallUeDevice(ueNodes);

    // Настройка трафика Full Buffer
    Ptr<EpcTft> tft = Create<EpcTft>();
    tft->Add(new EpcTft::PacketFilter(1));

    EpsBearer bearer(EpsBearer::NGBR_VIDEO_TCP_DEFAULT);
    lteHelper.ActivateDataRadioBearer(ueDevs, bearer);

    // Настройка планировщика пакетов
    lteHelper.SetSchedulerType("ns3::TdTbfqFfMacScheduler");

    // Настройка вывода ключевых характеристик с RLC и MAC уровней
    lteHelper.EnableRlcTraces();
    lteHelper.EnableMacTraces();

    // Запуск симуляции
    Simulator::Stop(Seconds(10));
    Simulator::Run();
    Simulator::Destroy();

    return 0;
}
